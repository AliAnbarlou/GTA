{% extends "../Base/adminbase.html" %} {% load static %} {% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock head %} {% block main %}
<h2>Dashboard</h2>
<div class="row mt-2 g-2 align-items-center text-center">
  <div class="col-12 col-md-6 col-lg-3">
    <b class="card p-2">
        <svg viewBox="-11.52 -11.52 47.04 47.04" id="meteor-icon-kit__regular-ban" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#000000" stroke-width="0.00024000000000000003"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM18.3287 19.7429C16.6049 21.1536 14.4013 22 12 22C6.47715 22 2 17.5228 2 12C2 9.59873 2.84637 7.39513 4.25706 5.67126L18.3287 19.7429ZM19.743 18.3287L5.67128 4.25705C7.39515 2.84636 9.59873 2 12 2C17.5228 2 22 6.47715 22 12C22 14.4013 21.1536 16.6049 19.743 18.3287Z" fill="#809bff"></path></g></svg>        Total Banned User: {{ banned_users }}
    </b>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <b class="card p-2">
      <svg viewBox="-12 -12 48.00 48.00" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="12" cy="6" r="4" stroke="#809bff" stroke-width="1.5"></circle> <path d="M15 20.6151C14.0907 20.8619 13.0736 21 12 21C8.13401 21 5 19.2091 5 17C5 14.7909 8.13401 13 12 13C15.866 13 19 14.7909 19 17C19 17.3453 18.9234 17.6804 18.7795 18" stroke="#809bff" stroke-width="1.5" stroke-linecap="round"></path> </g></svg>
      Total User: {{ total_users }}
    </b>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <b class="card p-2">
        <svg viewBox="-11.52 -11.52 47.04 47.04" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22 12C22 8.22876 22 6.34315 20.8284 5.17157C19.6569 4 17.7712 4 14 4H10C6.22876 4 4.34315 4 3.17157 5.17157C2 6.34315 2 8.22876 2 12C2 15.7712 2 17.6569 3.17157 18.8284C4.34315 20 6.22876 20 10 20H14C17.7712 20 19.6569 20 20.8284 18.8284C21.4816 18.1752 21.7706 17.3001 21.8985 16" stroke="#809bff" stroke-width="1.5" stroke-linecap="round"></path> <path d="M10 16H6" stroke="#809bff" stroke-width="1.5" stroke-linecap="round"></path> <path d="M14 16H12.5" stroke="#809bff" stroke-width="1.5" stroke-linecap="round"></path> <path d="M2 10L7 10M22 10L11 10" stroke="#809bff" stroke-width="1.5" stroke-linecap="round"></path> </g></svg>
      Total Cards: {{ total_cards }}
    </b>
  </div>
  <div class="col-12 col-md-6 col-lg-3">
    <b class="card p-2">
        <svg viewBox="-11.52 -11.52 47.04 47.04" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4.99255 12.9841C4.44027 12.9841 3.99255 13.4318 3.99255 13.9841C3.99255 14.3415 4.18004 14.6551 4.46202 14.8319L7.14964 17.5195C7.54016 17.9101 8.17333 17.9101 8.56385 17.5195C8.95438 17.129 8.95438 16.4958 8.56385 16.1053L7.44263 14.9841H14.9926C15.5448 14.9841 15.9926 14.5364 15.9926 13.9841C15.9926 13.4318 15.5448 12.9841 14.9926 12.9841L5.042 12.9841C5.03288 12.984 5.02376 12.984 5.01464 12.9841H4.99255Z" fill="#809bff"></path> <path d="M19.0074 11.0159C19.5597 11.0159 20.0074 10.5682 20.0074 10.0159C20.0074 9.6585 19.82 9.3449 19.538 9.16807L16.8504 6.48045C16.4598 6.08993 15.8267 6.08993 15.4361 6.48045C15.0456 6.87098 15.0456 7.50414 15.4361 7.89467L16.5574 9.01589L9.00745 9.01589C8.45516 9.01589 8.00745 9.46361 8.00745 10.0159C8.00745 10.5682 8.45516 11.0159 9.00745 11.0159L18.958 11.0159C18.9671 11.016 18.9762 11.016 18.9854 11.0159H19.0074Z" fill="#809bff"></path> </g></svg>
      Total Sell: {{ sold_cards }}
    </b>
  </div>
  <div class="purchase-trend-chart col-12 h-100">
    <div class="card p-2">
        <p>Total Amount: ${{ total_amount }}</p>

    <h3>Weekly profit total</h3>
    <canvas id="purchaseChart" width="400" height="200" ></canvas>
    <script>
      var purchaseLabels = {{ last_7_days_json|safe }};
      var purchaseData = {{ cumulative_totals_json|safe }};

      var ctx2 = document.getElementById('purchaseChart').getContext('2d');

      // Create a gradient for the area below the line chart
      var gradient = ctx2.createLinearGradient(0, 0, 0, 400);
      gradient.addColorStop(0, 'rgba(75, 192, 102, 0.5)');
      gradient.addColorStop(1, 'rgba(75, 192, 192, 0)');

      var purchaseChart = new Chart(ctx2, {
          type: 'line',
          data: {
              labels: purchaseLabels,
              datasets: [{
                  label: 'Cumulative interest amount',
                  data: purchaseData,
                  borderColor: 'rgb(103, 241, 126)',
                  backgroundColor: gradient,  // Apply the gradient here
                  fill: true,
                  tension: 0.4
              }]
          },
          options: {
              responsive: true,
              scales: {
                  y: { beginAtZero: true }
              }
          }
      });
    </script>
    </div>
  </div>
</div>

{% endblock main %}